#title Welcome
* 14年1月4日 周六 15:04

** 更方便简洁的 Upload Script

我一直使用一个上传脚本更新这个网站，这个脚本始于 2005 年五一
[[blog#2005-05#p2][Upload shell script v1.2]]，当时还使用什么 ncftpput 程序来对每一个更新过的
文件进行一次 ftp 连接传输。

然后这个脚本我居然还一直使用到了昨天，横跨 Win、Mac、Linux 系统，甚至还
在虚拟机里面用过，因为有 ncftpput 的依赖嘛，Win 下以及一些小系统上还真不
好弄。

虽然我很早就已经了解了终端下的 ftp 命令，还使用过好多次，可是我怎么就不
懂得结合起来、多动动脑筋呢。

下面做同样事情的脚本更简洁，只需要一次 ftp 连接，对于访问连接慢的大量更
新更为有利，且所需要的背景知识 05 年的我应该也已经具备了，深深地鄙视这么
多年的自己，笨死了。

贴一下核心部分就好了：

<src type="sh">
#!/bin/bash
ftp -n << "___EOF__"
open 192.168.33.88
user FTP_USER FTP_PASS_WORD
mkdir PATH_1_TO_CREATE
mkdir PATH_2/TO_CREATE
put LOCAL/PATH/FILE_1 REMOTE/PATH/FILE_1
put LOCAL/PATH/FILE_2 REMOTE/PATH/FILE_2
bye
"___EOF__"
</src>

将需要创建的目录、上传的文件替换上去就好了。目前我是生成一个临时脚本，然
后运行上传命令。

我把这个脚本扔到了这里 https://github.com/lalawue/shell_script_stuff。

*** [[CategoryProgramming][CategoryProgramming]] / [[2014-01#p1][Permalink]]

<!-- date: 2014-01-04T15:04:51+0800 -->

* 14年1月1日 周三 02:34

** 快速关闭远程 server 的 expect 脚本

我停掉了之前的阿里云服务器，而在自己液晶屏亮不起来的破笔记本上安装了
ubuntu server，将 git server、nginx + wiki 都安装在了上面，反正 server
只是提供网络服务，不需要显示器。不过暂时每天的开关机还是需要的。

目前开机还是得按本本的电源键，不过关机倒是可以通过网络来进行，当然也就可
以使用下面的 expect 脚本了。

我是 ssh 上去关闭的，可以根据需要改成 telnet，一些适配的变量是 root 用户
ssh 上去的 prompt，shell 下 power off 的命令，一些发行版可能是 halt，不
过也得看电源模块的配置的吧，最后是 server power off 后广播出来的字符串。

按照惯例贴代码：

<src type="sh">
#!/usr/bin/expect
#
# create in 2013/12/31, by sucha in http://suchang.net
#
# Usage: halt_server host_ip

# prompt for root@host_ip
set serv_root_prompt "password"
set serv_halt_cmd "shutdown -h now"
set serv_halt_expect "halt"

set timeout 10
if { $argc != 1 } {
	send_user "$argv0 \$HOST_IP\n"
	exit
}

# get server ip
set host [lrange $argv 0 0]

# get root's passwd
stty -echo
send_user -- "Password for root@$host: "
expect_user -re "(.*)\n"
send_user "\n"
set pass $expect_out(1,string)

# login server and run halt
spawn ssh -2 root@$host
expect $serv_root_prompt
send $pass\r
send $serv_halt_cmd\r
expect $serv_halt_expect
exit
</src>

*** [[CategoryProgramming][CategoryProgramming]] / [[2014-01#p0][Permalink]] 

<!-- date: 2014-01-01T02:34:43+0800 -->

* 13年12月24日 周二 18:35

** 准备搬到珠海

过几天就要搬到珠海了，因为跟高中同学合伙做游戏的关系，需要经常性的沟通，
他已经结婚在珠海，父母也在那边。且年后估计还有一位高中同学也过来编码，选
择珠海，也是在这个背景之下。

我 8 月份的时候才开始做游戏，之前是忙一个监控项目的 iOS 界面，收了一笔小
钱，是跟我的一位大学同学合作。他当时犹豫着跳槽，进入一个澳洲华人开的外资
公司，一起开公司合作这个 APP。项目已经开始了，但当时他还没跳出来，每天还
得上班，时间有限，于是就拉我进来，一起合作，价钱跟澳洲那边谈。

后来我发现自己负责了很多东西，相比我之前的报价，负责的东西挺多的了。这是
我第一次接单，报价也是按照自己之前的薪水估的，不过怎么说，这个 APP 也算
是一个有点样子的软件了吧。

在负责这个 APP 的过程中，其实我已经在考虑做一个什么样的游戏，而做游戏的
想法，来自于远在上海的村长童鞋，去年被别人从完美拉出来做游戏，主动丢掉
20K/Y 的薪水，然后游戏以很不错的价格出手。我看过那个游戏，自觉我也可以做
出来，就想干嘛不试试呢，反正我也没其他东西可做。

我没接单之前，做过其他的 APP，都很差，算是很失败，推一个 APP 不容易，找
到一条市场道路也难，这些都在我目前的经验之外；而捡起我以前熟悉的设备端，
设备调试生产备料投产出货整个周期之长、投入之大，对团队的要求不是一般地高，
我也很自觉地放弃了。

我有写程序的能力，而策划童鞋有构思游戏的能力，双方合作貌似是个不错的点，
至少有个像样的游戏出来了吧。

我最开始想做的，是类 COC 的游戏，那时候我大概玩了有 3、4 个月，特别喜欢，
等到 8 月初我跟我的小伙伴们商量，提出我的看法时，两位在游戏公司的童鞋就
直接把这个否掉了，说这个的山寨太多了，也不容易做好。

现在回头一看，确实山寨太多了，绝大部分做得很糟糕，而以我们目前的研发实力，
根本做不出这样的精品。

当时不到一个早上就把我想了一个多月的想法给砍掉了，还好砍掉了。然后一个早
上就确定了要做的游戏类型，我这个游戏白痴居然还想了一两个月，其实嘛，找一
两个一直关注游戏的人，就有谱了。

然后是从无到有写最核心的玩法，实际上这个玩法一直在改，现在也没完全定下来。

10 月份之前的进度很慢，界面都没有，算是搭了一部分的核心数据结构，服务端
与客户端可以做数据协议交互。

10 月份之后，慢慢地有了几个界面，核心部分也慢慢出来了。然后服务端、客户
端，以及简单的数据库，组件也慢慢地清晰起来。也面对了很多之前单独做设备不
需要面对的 C/S 问题，甚至以后可能面对的集群的问题。

话说这几个月也遇到了团队的一些问题，我们团队其实也有不少矛盾，所以也一直
不稳定，当初说要加入的某童鞋，直到现在其实也没有真正加入进来，而一些童鞋，
在加入之前有一些要求，我们暂时不具备，初期也不打算往那个方向走，另外一些
则慢慢退出了。

我的想法也在变化，我最开始以为只要我一个人全职，他们兼职都是可以的，现在
看来那是不行的，对于游戏开发来说，需要沟通的东西太多太多，有太多太多的细
节，远程不合适，程序、美术的合作如果可能，尽量面对面。这样，对团队的发展
也是很有利的。

所以到了现在，最稳定的是我跟策划，一个程序员，一个兼职的策划，没有美工，
我们也许等 demo 差不多了之后，游戏的大体框架差不多了之后，外包美术吧。

另外，如果年后那位童鞋过来，也会缓解一部分程序的压力，我们可以规划稍微大
一点的东西。如果有两位程序，对于这个游戏来说，程序的问题应该差不多了。

我本来是没指望这位童鞋过来的，最开始只是期望他可以兼职，但他实在是太忙了，
根本都没参与进来。而后面，我也慢慢意识到，兼职是不行的。

如果只有我一个程序员的话，是打算年后再搬到珠海去的，毕竟最后也还是要经常
沟通，只是前期可以先搭好底层、出个 demo 再说。

后来这位童鞋貌似自己想清楚了（话说我也一直持续不断地每周跟他东聊西聊），
也跟家里人谈过了。想到他节后过来的话，那我 1 月份最好就把珠海那边的地点
定好，环境搭好，等他过来就不用搞这么多的麻烦事了。

我收到他打算辞职过来的消息，是 12 月中旬刚过，于是马上跟策划童鞋商量了搬
到珠海去，也跟深圳这边的舍友说了一下，没想到他们同事刚好在找房子，元旦之
前要搬进来。然后我就收拾东西，跟以前的同事吃了一顿。而大学童鞋是好几周之
前聚了一下，当时我还跟他们说是年后去珠海呢。

回顾了这几个月跟游戏项目相关的东西，想想哪有什么不变的计划，不变的团队，
都是扯谈。

不过这几个月过来，我想我跟策划，至少多了很多的信任。就跟手头的代码一样，
从无到有，从毫无用处到勉强运行，从无数 bug 到能够接受，需要时间，需要持
续不断地打磨。相互的信任，相互沟通交流的方式等等，也需要时间，需要耐心，
来磨合。

同样的，感觉目前对项目的把握能力，也增加了不少，这些都在变化。

话说这几个月中间经历了的不少事情，包括当时团队的一些问题，真是让人情绪低
落。还有要说家里人很支持自己那才见鬼了呢，那当然也是好心相劝，他们也会来
软的来硬的，反正常打电话回家就对了。

其实他们所有的这些担心、质疑啊都是对的，毕竟这个项目本身面对的就是不确定，
可能的另外一面是不可能，结果如何，目前也无法知道。

担心啊质疑啊，一方面是价值观的问题，就是他们不认可游戏，或者认为做游戏不
好。不认可的原因可能是信息缺失，就比如今年下半年我才知道比特币一样；认为
不好的有可能是道德判断，觉得游戏不那么正经。虽然天朝已经开始发文规范手游，
且电竞早就是国家认可的体育项目了。

另外一部分是担心质疑能力，是否可以做出来，是否可以卖出去。我自知能力有限，
无数的例子，比如之前说到的想做 COC，如果真的是选那条路，我估计已经死了，
是累死的。还好，我们是个团队，有个很不错的策划，如果还有个美术就更好了。
随着合作时间的推移，我们也会成长，我们也在学习，但是结果如何，现在是没有
答案的，答案在将来。

其实我也有担心，有质疑，只不过我获得的信息让我认可了目前的项目，且我也自
认能力足够，团队还是可以的。我也有很多的选择，只不过如果改做其他的东西，
这个可能的项目就将成为一个很大的机会成本，我可不想后悔，所以就是这么简单
的选择。

*** [[CategoryLife][CategoryLife]] / [[2013-12#p2][Permalink]] 

<!-- date: 2013-12-24T18:35:55+0800 -->

* 13年12月24日 周二 18:14

** 笔记本使用外接 VGA 作为主屏

我的笔记本很早就退居二线，不再作为主要的生产力工具，一方面速度慢，一方面
是液晶显示屏背光出了问题。

最开始的时候是背光偶尔不亮，然后手动翻盖折叠一下，就又亮了，然后慢慢变成
了即便翻盖都不亮了，不过无论如何，启动后大概一分钟内，背光都是亮的。

找过 HP 金牌服务中心，收了 50 块评估费用后，说是显卡坏了，要 600 块才能
修，600 块都可以买台二手笔记本了，那就只好算了。话说这台是 07 年 11 月份
买的，无独立显卡，检测说集成显卡坏了我不认同。

虽然 CPU 仍当壮年，可花大价钱修理不值得，扔掉也可惜。

且我准备停掉阿里云的服务器，就想把这台笔记本当做服务器好了，服务器嘛，平
时也不需要显示屏，只要接好网线，可以 SSH 上去就好了。硬盘上已经有了一个
07 年末到现在从未重装过的 XP，就想再搞个 Linux 系统上去。

然后才发觉没有液晶屏是个大问题，我用 U 盘启动装 Linux 系统，当液晶背光突
然黑了，就没法继续安装了，那些选项都看不到，还搞毛。

于是想通过外接 VGA 来弄，可发现 HP 这边吧，Fn + F4 激活外接 VGA 显示，是
要进入 windows 后才可以的。

这可苦了我，还好我有台式机，google 到一篇帖子，说断掉电源，拔掉笔记本电
池，断开主板液晶显示屏的连接，然后按住电源 60 秒重启 BIOS，之后插入外接
VGA 线，让主板 BIOS 认为外接 VGA 是主屏幕。

这样终于可以了，不过想了一下我的操作，觉得也许按住电源键 60 秒重启主板
BIOS 是没有必要的，只要断掉电源、拔掉电池，然后断开主板液晶屏的连接，接
入外接的 VGA 显示器，重启系统就好了。

目前是可以在启动最开始的时候从外接 VGA 中看到 BIOS 的启动画面，可以设置
BIOS 等，当然安装系统这些就不在话下了。

*** [[CategoryLinux][CategoryLinux]] / [[2013-12#p1][Permalink]] 

<!-- date: 2013-12-24T18:14:40+0800 -->

* 13年12月13日 周五 10:45

** 站点备份改成了 github

之前是保存在 YUNIO 上面，感觉自己算是蛮早的一批 YUNIO 用户，分到的免费空
间还是很大的，只是连接很不方便。

虽然各个平台上都有客户端，但是其连接配置从我使用到现在换了好几种，也不算
稳定，经常要重连确认本地、远程版本什么的，那还不如直接改成 github 算了。

反正站点也是完全公开的，

*** [[CategoryThisSite][CategoryThisSite]] / [[2013-12#p0][Permalink]] 

<!-- date: 2013-12-13T10:45:15+0800 -->

* 13年11月9日 周六 10:44

** 生活中的值得与不值得

时间轴往前移个 20 年，当年要是谁家有台老任的红白机，绝对让小伙伴们眼馋，
谁不想玩上几把，作业神马的都忘在脑后，要是遇上放暑假，那些作业往往都压在
最后完成，打机才是我们最期待的事情。

时光回到现在，被眼红的，变成了身家、豪宅、跑车、美女无疑，若还能像明星般
在人群中闪耀，拥有上天赐予的容貌与身材，更是难求。

如今各种媒体宣传、展示，人们最想要的，是以上那些值得炫耀、吸引眼球的生活，
在主流的话语圈中，生活要如此配置，才算是值得过。

而为了过上值得过的生活，所有通往这个配置的努力，才算是实实在在的拼博。

为了更快到达这个阶段，我们未出生就已经开始了赛跑，先是曾祖这一辈的赛跑、
接着是祖父这一辈的、然后是父母辈，到我们出生，尽各自所能上好的托儿所、幼
儿园、小学、中学、高中，拿各种国内奖、国外奖，甚至跳级、进少年班，然后留
学去国外上更好的大学，披更多地光环，毕业后去明星公司、或是继承父辈的基业，
年少有为，这是基础配置。

而大部分的人未出生开始做预备动作，父母辈就已经落后别人家几条街了。

我以前觉得应试教育的结果，是各式各样，各有所长的学生，被量化到了一把尺子
里，就这样被不断纠正量化十几年，因为只有一个目标：分数，所以量化的尺度显
然是唯一的。

而这个在各路媒体宣传打造下的平庸社会，把生活弄成了各种配置，极力宣扬高配
的生活才是人们所应该追求的。让我离开学校好几年，又突然有了一种被量化的感
觉，我们全身上下，眼镜、手机、手表、衣服、裤子、鞋子，电视、家具、住宅都
被分成了各种等级，量化到各种配置里。

然后还是同一把尺子的标准下，极力宣传，唤起人们内心脆弱的渴望，目标只是过
上值得过的生活。

所有人的渴望，就不是自己的渴望了，那大部分是其他人很分散、单独的渴望，他
人心目中值得与不值得的判断标准。

可是，明明就有很多东西是无法被量化的，自然就很难以大众的眼光来评判说值得
与不值得。

比如，前几天看到的，一个报社副编辑辞职，举报当地的一个领导，怕被报复，出
门都头戴钢盔，手持防卫棍棒，住所还安了望远镜。

比如，如今好多大城市工作、生活压力大的年轻人辞职去西藏旅行，豁达身心。

比如，深圳这边的义工，他们牺牲自己的业余时间来做很多对市民很有帮助的活动。

这些无法被量化的事情，却占据了他们生活中的很大一部分，其实我还可以举上很
多很多的例子。更为显然的是假若你现在所从事、所追求的东西，当前的世界上并
不存在，也就无法量化为值得与不值得，就算结果可以描绘得很美好，但是否真的
可以，都是未知的。

所以值得与不值得，变成了到底是忠于自己，还是忠于主流媒体的宣传、大众、别
人的眼光、他人评判的事情。

如果只是忠于自己，那显然是很私人的事情，这里的私人，并不是指这件事不可以
拿出来说，而是指即便将其拿出来摊开说，他人也难以做到完全理解、评判其中的
价值，因为有些事情，就是仅仅对于自己才有特殊的意义。

这样说来，每个人的生活对于自己的全部价值，无法以众人的眼光进行评判，而所
谓主流的眼光，评判的值得与不值得，那是集千千万万个客体的眼光，他们都有自
己很特殊很渴望的一面，并不是每一个自己所有的渴望，区分自己内心的渴望与他
人的渴望，这个度得把握好。

*** [[CategoryLife][CategoryLife]] / [[2013-11#p2][Permalink]] 

<!-- date: 2013-11-09T10:44:10+0800 -->

* 13年11月7日 周四 19:11

** 新入 Noppoo Choc Mini 84

前天心血来潮，觉得原来的 104 键盘太大了，右手边的小键盘区老是阻碍到鼠标
的发挥，而小键盘区实际上使用率很低，然后就觉得很奇怪，为啥厂家们都不把
104 键盘的小键盘区放在左边呢，这样右手鼠标多自由，然后使用频率低得小键盘
区左手操作还能锻炼右脑有木有。

然后就想到要不买一款小键盘吧，然后就开始找，不知怎么就找到了这款 Noppoo
Choc Mini 84，笔记本键盘布局很不错的样子，不过当时就搜到了说不支持 Mac，
但后来又找到可以装第三方自由开发者弄的野路子驱动，可以比较完美地支持。

因为是机械键盘，还不便宜，我还上 amazon 搜了薄膜键盘，奇怪的是便宜的薄膜
键盘，笔记本或者更小布局的，都只有超薄型号的，我是平常在家使用，超薄的太
轻，感觉无法接受。

好吧，机械键盘我也认了。其实后来还找到了 pocker II，以及网上吹得很厉害的
HKKB，pocker 也是机械键盘，外观更讨喜，但 61 键的布局我觉得是偏小了，
F1 ~ F12、以及 Pgup、Pgdn 等对我来说还是蛮重要的，偶尔看长网页或者大段代
码的时候，我也懒得在 emacs 里面使用组合按键，而直接就是用这些键了。

HKKB 也是按键偏小，而且静电电容键盘价格又高，大概 2k 以上，远超我的预算
了，虽然实际上我一般也没啥预算的样子。

然后到选机械键盘的轴，虽然都是 cherry 的轴，但还有青轴、茶轴、黑轴、红轴
等等的区别，这里不说了，我还跑到 youku 上面听了一把，其实这些虽然都是使
用 cherry 的轴，不同品牌声音还有差别，除此以外，当然还有其他的原因，后面
再说。

话说黑轴的声音以及键程很短，按键需要的力量也大，直上直下，不大适合平时打
字，这些都是传说，但是出货量大，taobao 这个款的便宜，mini 84 卖的店家不多，
青轴、茶轴的更少，没啥选的，后面找到了一家还不便宜，选了青轴，反正青轴茶
轴我也分不出来，不过后来觉得青轴的声音还是有点大，不晓得茶轴的声音如何。

然后今天中午货到家了，看起来还不错，但是遇到了几个现实的问题，一是之前就
预料到的 mac 下的驱动问题，还好解决了，直接装了 github 上一个相关项目的驱
动，然后还要装个 <nop>KeyMap4MacBook</nop> 才行，要不然 emacs 里面 meta
按键还不能用，对了，我习惯 pc 下的 alt 做 option、win 做 command，emacs
下面 alt 不变。

驱动的问题解决，然后是上面有提到的声音问题，机械键盘很重，底盘也重，键程
又长，也许是我之前的薄膜键盘需要很大力气按吧，在我的木桌子上，声音好大呀，
我仔细分辨，有底座敲击桌面的声音，因为是木桌子，有点年月了，也许是桌面比
较脆吧，于是就想着垫个鼠标垫上去，声音其实还是有，非得垫个毛巾之类的，还
要叠上几层，那个底座敲击桌面的声音才听不到，不过这样子，纯粹青轴的声音也
不小，好蛋疼。

然后还有，机械键盘的按键好高，底盘也高，一开始好不适应，要比我之前那个薄
膜键盘高出来大概有 1 个多厘米，如果我要获得与之前薄膜键盘一样的手臂压住桌
面的感觉，就还得买一个掌托，我真是自找苦吃啊。

好吧，先折腾一段时间，大概一个月再看看，有没有哭不出来的感觉。

*** [[CategoryLife][CategoryLife]] / [[2013-11#p1][Permalink]] 

<!-- date: 2013-11-07T19:11:43+0800 -->

* 13年11月2日 周六 23:19

** Bash 下统计文件行数

直接列代码了，用的 pattern 是 find 命令的。

<src type="sh">
linesInFilePattern() {
        sum=0
        for file in $(find . -name "$1"); do
                line=`wc -l $file`
                cur=`echo $line | cut -d' ' -f1`
                sum=$(($sum + $cur))
        done
        echo total is $sum
}
</src>

*** [[CategoryProgramming][CategoryProgramming]] / [[2013-11#p0][Permalink]] 

<!-- date: 2013-11-02T23:19:01+0800 -->

* 13年10月27日 周日 10:13

** 有关错误

我犯过很多错误，有大有小，小错连回顾的想法都没有就过了，大错是会努力记住，
想不再犯，不过也指不定哪天就忘了。小时候还坚信觉得人若聪明，犯过的错误就
不会再犯。

后来懂得了，人只不过一个生物，虽然进化了多少万年，但很多方面与地球上其他
的生物无二样，若用极有逻辑的思维去推敲，人大部分的时候都蠢到极点。

也不能怪自己，与其他的生物一样，我们生来并非自己选择，身上的基因却生来就
有缺陷，身为半成品却想走完美路线，这件事一开始就错了。

扯了那么多，可严格来说，到底什么是错误，总感觉很难定论。有公理、定理、逻
辑推论的系统，要证明错误总是有方法的，可那是严格定义的世界，那个世界有很
明确的边界，很明确的符号，很明确的行为，很明确的对象关系。

可在日常的生活中呢，所有的一切都混杂在一起，哪里有什么公理，明明就是公说
公有理、婆说婆有理，非要用色彩来比喻，这是灰色的世界。

所以嘛，他人眼中的错误，也许偏偏就是你的心头好，反过来呢，也一样。

但是偏偏有些事情再复杂，也得分出边界来，要不然，我是你？你是我？你的是我
的？我的还是我的？

所以就有了大家自认为的伦理，那确实是一堆人非要在一起组成个复杂的群体才会
有的东西，我想我们的对错之分，应该就在这个伦理的系统里。

可是这么模糊的边界、这么难以捉摸的定义，总感觉就像在雾霾天里，大家都看得
到彼此，大家都看不清楚彼此，大家都不大想让别人看太清自己，而大家实际上也
不大可能看太清楚彼此，如今大家可是乐不乐意都生活在这样的环境里。

如果还是硬要用色彩来比喻，我觉得是灰度为 55&#37; 的世界。

身为半成品，我对自己还有很不满意的地方，比如思考能力有限。就算给我一个很
明确的世界，我也得推理半天才能得到对错的结论。就别说丢给我一块地图了，各
种语言混杂，各种符号标识乱注，有的地方信息少得可怜，有的地方却信息太多过
滤不来，我才思考完一段旅程，说不定就风烛残年了，还怀抱理想着走出这个灰色
的世界？

我看我还是丢掉完美路线的思维定势，有限的时间做出决定就好了，对错之分等等
就交给这个复杂的系统，坦诚面对吧。

*** [[CategoryLife][CategoryLife]] / [[2013-10#p1][Permalink]] 

<!-- date: 2013-10-27T10:13:53+0800 -->

* 13年10月10日 周四 18:08

** 搭建 git 认证服务端、wiki知识系统

终于进入到多人开发游戏的情况，源代码的版本控制变得必要了，毫无疑问使用
git，为此我还查找了 diff 和 apply 的使用，git 有自己的一套东西，但这些确
实不算方便，可以说是穷人间低频度交流开发的工具，如果是高频度地交流，统一
的服务器变得必要。

之前我已经租了一个阿里云服务器，用来放我们的游戏服务端，目前还在开发早期，
在上面搭建一个 git 服务端再好不过。用的是 gitosis，网上配置文章一大把，使
用下来，确实不错。

今天又搭建了一个 wiki，用的是 dokuwiki，看中的是没有 db，且我们的文档也不
会很多，简单的足够了。后面大家的文档交流不需要通过邮箱了，到时版本也复杂，
直接通过网页文档交流多好。

可以将搭建开发环境、工具使用，系统设计、开发约定的一些东西放上去，以后就
不需要一遍又一遍地发邮件确认了。

对，其实我们还需要一个任务列表，东西、想法比较多的时候，就该权衡哪些东西
该留、哪些东西该丢掉了，然后就看看需要那些资源，补充进来，跟进度，确认质
量，流程应该没错吧。

*** [[CategoryProgramming][CategoryProgramming]] / [[2013-10#p0][Permalink]] 

<!-- date: 2013-10-10T18:08:10+0800 -->

* 13年9月29日 周日 18:45

** Bash 下对比两个文件夹的文件并更新

有时候确实有这样的需求，两个文件夹下面的文件都差不多，但是他们因为各种原
因不属于同一个 git 根，至少在没有这些强大的版本控制系统下，我们又需要做对
比更新，那请看下面，需要 diff、cut 以及 bash 内建的 cp 命令。

<src type="sh">
checknew() {
	if [ $# == 2 ]; then
		diff -rqX ~/bin/diff_ignore.txt $1 $2
	else
		echo checknew DIR1 DIR2
	fi
}
</src>

checknew 用来检测那些文件有变动，其中会排除一些文件，文件名的模式放到了
~/bin/diff_ignore.txt 中，我的那个内容如下：

<src type="sh">
*.git
*.so
*.dSYM
TAGS
*.elc
.gitignore
</src>

而 copynew src dest 这是将不同目录下的文件比较后做拷贝更新。

<src type="sh">
copynew() {
	if [ $# != 2 ]; then
		echo copynew srcDir desDir
		return
	fi

	tmp_file=/tmp/ccc.txt
	
	# generate diff output
	diff -rqX ~/bin/diff_ignore.txt $1 $2 | grep "^Files" | cut -d" " -f 2,4 > $tmp_file

	#update file
	magic=12343188
	src=$magic
	for file in $(cat $tmp_file); do
		des=$file
		if [ $src == $magic ]; then
			src=$des
            continue
		else
			cp $src $des
			src=$magic
		fi
	done

	rm $tmp_file
}
</src>

*** [[CategoryLinux][CategoryLinux]] / [[2013-09#p0][Permalink]]  

<!-- date: 2013-09-29T18:45:56+0800 -->

