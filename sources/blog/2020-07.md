#title Archive for July, 2020

#p2
#date 20年7月15日 周三 22:38

## MacOS 下使用 BitBar 在状态栏自定义信息

如果自己有一些信息需要通过点击状态栏图标后获得，或者通过点击状态栏图标启动、关闭的，都可以使用这个工具 [BitBar](https://getbitbar.com) 来操作。

安装好后，只需要定义 plugin 目录，然后在 plugin 目录下加入功能脚本就可以了。脚本其实只关注输出的文本，操作部分其实是通过特殊命令来定义的。

比如例子中的 refresh.sh，精简后是下面这样：

```source
#!/bin/bash
if [[ "$1" = "restart" ]]; then
osascript <<EOD
	tell application "BitBar" to quit
	delay 1
	tell application "BitBar" to activate
EOD
fi

echo "↻"
echo "---"
echo "Refresh Me| terminal=false refresh=true"
echo "Restart Bitbar| bash='$0' param1=restart terminal=false";
```

会在状态栏显示一个圆圈刷新，点击后下拉菜单会有 "Refresh Me" 以及 "Restart Bitbar"。

- Refresh Me 是第一项，'|' 后定义功能动作，不新开一个 shell，刷新菜单
- Restart Bitbar 是第二项，bash 定义使用到的脚本或者程序，‘$0' 就是 Bitbar 自己了，参数是 "restart"，其实是关闭然后再重启这个 refresh.sh，简简单单的 bash shell 语法了

可惜的是我虽然弄懂了一点点如何编写这个 Bitbar 的 plugin 命令，但是通过 Bitbar 控制的程序最后没有符合我的预期，:-(

#category Linux



#p1
#date 20年7月14日 周二 11:34

## GitHub 定义 Repo 语言

之前写的 [LWTheme](https://github.com/lalawue/LWTheme) 兼顾 Swift/ObjC 语言，GitHub 改版后，在 repo 里面没有语言百分比的显示了。

搜了一下，可以在 branch 里面定义 .gitattributes 文件，里面这样写

```source
*.swift linguist-language=Swift
```

自测了一把，网站只会读取 default branch 里面的 .gitattributes，切换其他 branch 没有用。

#category Misc



#p0
#date 20年7月9日 周四 15:44

## OpenVPN 配置记录

其实考虑过几个比如 ShadowSocks 之类的，但是很不稳定，考虑最后也许还是用 VPN 来得稳妥一些，折腾了半天，终于跑通，先这里随便记录一下吧。

大概分两个部分，一个是服务端的配置，一个是客户端的配置。

- Ubuntu 下先 apt-get install openvpn
- 然后[生成服务端、客户端的密钥](https://article.itxueyuan.com/pMy1b)，比如 ca、server key、client key、dh
- 接着[服务端软件配置 server.config](http://blog.joylau.cn/2020/05/28/OpenVPN-Config/)，其实主要是上述密钥的配置，以及日志等文件位置，以及刚开始试运行时设置日志打印的密度
- 还有[服务端系统配置](https://wiki.deepin.org/wiki/VPN服务)， 比如 iptables 配置转发
- 最后[客户端软件配置](http://blog.joylau.cn/2020/05/28/OpenVPN-Config/)，大体上只是配置服务端 ip 地址，密钥就可以了

客户端我在 Mac 下用的是 TunnelBlick，速度其实一般，还没长时间使用，后续先观察一阵。

#category Misc